(this["webpackJsonphex-grid"]=this["webpackJsonphex-grid"]||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var i=n(1),o=n.n(i),r=n(12),a=n.n(r),s=n(10),u=n(8),c=Object(u.b)({name:"color",initialState:{hue:300,saturation:50,lightness:40},reducers:{adjustHue:function(e,t){var n=e.hue+t.payload%360;n<0?n+=360:n>360&&(n-=360),e.hue=n},adjustSaturation:function(e,t){e.saturation=Math.min(100,Math.max(0,e.saturation+t.payload))},adjustLightness:function(e,t){e.lightness=Math.min(100,Math.max(0,e.lightness+t.payload))}}}),h=c.actions,l=(h.adjustHue,h.adjustSaturation,h.adjustLightness,c.reducer),d=n(20);function f(e){return Object(d.b)({orientation:"flat",size:e,offset:-1})}function v(e){return e().corners().map((function(e){var t=e.x,n=e.y;return"".concat(t,", ").concat(n)})).join(" ")}function j(){document.documentElement.style.setProperty("--vh","".concat(.01*window.innerHeight,"px"));var e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight,n=Math.min(e,t),i=72;n<=640?i=36:n<=768?i=48:n<=1024&&(i=60);var o=f(i),r=i*Math.sqrt(3),a=2*i,s=Math.floor(e/(.75*a))+2,u=Math.floor(t/r)+3,c={x:Math.floor(s/2),y:Math.floor(u/2)},h=o(c).cube(),l={hue:6,lightness:3,saturation:4};return(u<=8||s<=8)&&(l.hue*=1.5,l.lightness*=1.5),u<=8&&(l.saturation*=1.5),{screenDimensions:{height:t,width:e},gridDimensions:{height:u,width:s},cellDimensions:{height:r,width:a},cellPointsString:v(o),baseHexSize:i,centerCoord:c,centerCoordCube:h,colorScaling:l}}var m=Object(u.b)({name:"hexGrid",initialState:j(),reducers:{resize:function(e){var t=j();e.screenDimensions=t.screenDimensions,e.gridDimensions=t.gridDimensions,e.cellDimensions=t.cellDimensions,e.cellPointsString=t.cellPointsString,e.centerCoord=t.centerCoord,e.baseHexSize=t.baseHexSize}}}),b=(m.actions.resize,m.reducer),g=Object(u.a)({reducer:{color:l,hexGrid:b}});function y(e,t,n){var i=(n[1]-n[0])/(t[1]-t[0]),o=Math.min(t[1],Math.max(t[0],e))-t[0];return n[0]+o*i}function p(e,t,n){return Math.max(t,Math.min(n,e))}n(34);var x=n(2),C=function(){return Object(s.b)()},I=s.c,w=(n(35),n(0));var O=function(e){var t=I((function(e){return e.hexGrid.centerCoord})),n=I((function(e){return e.hexGrid.centerCoordCube})),o=I((function(e){return e.hexGrid.cellPointsString})),r=I((function(e){return e.hexGrid.colorScaling})),a=I((function(e){return e.color.hue})),s=I((function(e){return e.color.saturation})),u=I((function(e){return e.color.lightness})),c=Object(i.useMemo)((function(){return a-r.hue*(e.hex.q-n.q)}),[a,r,n,e.hex]),h=Object(i.useMemo)((function(){return p(s+r.saturation*(e.hex.s-n.s),0,100)}),[s,r,n,e.hex]),l=Object(i.useMemo)((function(){return p(u-r.lightness*(e.hex.r-n.r),0,100)}),[u,r,n,e.hex]),d=Object(i.useMemo)((function(){return"hsl(".concat(c,", ").concat(h,"%, ").concat(l,"%)")}),[c,h,l]),f=d,v=1,j=.15;e.hex.equals(t)&&(v=2,j=.5,f="black");var m=e.hex.toPoint(),b=m.x,g=m.y,y="translate(".concat(b,", ").concat(g,")");return Object(w.jsx)("g",{transform:y,children:Object(w.jsx)("polygon",{points:o,fill:d,stroke:f,strokeOpacity:j,strokeWidth:v})})};var V=function(){var e=I((function(e){return e.hexGrid.screenDimensions})),t=I((function(e){return e.hexGrid.gridDimensions})),n=I((function(e){return e.hexGrid.cellDimensions})),o=I((function(e){return e.hexGrid.centerCoord})),r=I((function(e){return e.hexGrid.baseHexSize})),a=Object(i.useMemo)((function(){return function(e,t,n){var i=f(n),o=Object(d.a)(i).rectangle({width:e.width,height:e.height}),r=o.indexOf(t);if(-1!==r){var a=o.splice(r,1)[0];o.push(a)}return o}(t,o,r)}),[t,o,r]),s=Object(i.useMemo)((function(){return a.map((function(e){return Object(w.jsx)(O,{hex:e},function(e){return"".concat(e.q,"~").concat(e.r,"~").concat(e.s)}(e))}))}),[a]),u=a[a.length-1].toPoint(),c=e.height/2-u.y-n.height/2,h={position:"relative",left:e.width/2-u.x-n.width/2,top:c,overflow:"visible",userSelect:"none"};return Object(w.jsx)("svg",{style:h,children:s})},M=(n(37),n(22)),q=n(15),T=n(16),S=[0,4,7,0],A=[0,3,7,0],L=[0,3,6,0],G=[0,4,7,10],N=[0,4,7,11],F=[0,3,7,10],k=S,E={"I Maj":[0,S],"II min":[2,A],"III min":[4,A],"IV Maj":[5,S],"V Maj":[7,S],"VI min":[9,A],"VII dim":[11,L],"I min":[0,A],"II dim":[2,L],"bIII Aug":[3,[0,4,8,0]],"IV min":[5,A],"bVI Maj":[8,S],"bVII Maj":[10,S],"III Maj":[4,S],I7:[0,G],II7:[2,G],III7:[4,G],IV7:[5,G],V7:[7,G],VI7:[9,G],VII7:[11,G],"I Maj7":[0,N],"II Maj7":[2,N],"III Maj7":[4,N],"IV Maj7":[5,N],"V Maj7":[7,N],"VI Maj7":[9,N],"VII Maj7":[11,N],"I min7":[0,F],"II min7":[2,F],"III min7":[4,F],"IV min7":[5,F],"V min7":[7,F],"VI min7":[9,F],"VII min7":[11,F]},P={"Awesome-1":["I Maj","V Maj","VI min","IV Maj"],"Awesome-2":["V Maj","VI min","IV Maj","I Maj"],"Awesome-3":["VI min","IV Maj","I Maj","V Maj"],"Awesome-4":["IV Maj","I Maj","V Maj","VI min"],"Awesome-5":["I Maj","V Maj","bVII Maj","IV Maj"],"Awesome-6":["I Maj","IV Maj","bVII Maj","IV Maj"],Fifties:["I Maj","VI min","IV Maj","V Maj"],Circle:["VI min","II min","V Maj","I Maj"],"Three-Chord-1":["V Maj","I Maj","IV Maj"],"Three-Chord-2":["I Maj","V Maj","IV Maj","V Maj"],"Three-Chord-3":["V Maj","IV Maj","I Maj"],"Three-Chord-4":["I Maj","VI min","V Maj"],"Three-Chord-5":["I Maj","II min","V Maj"],Pachelbel:["I Maj","V Maj","VI min","III min","IV Maj","I Maj","IV Maj","V Maj"],Royal:["IV Maj7","V7","III min7","VI min"],"Royal-Extended":["IV Maj7","V7","III min7","VI min","II min7","V7","I Maj"],MontyWard:["I7","IV7","II min7","V7"]},D=Object.keys(P);function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=new OscillatorNode(e,{type:"square"}),i=new OscillatorNode(e,{type:"sawtooth"}),o=new OscillatorNode(e,{type:"sine"});return n.frequency.setValueAtTime(440,e.currentTime),i.frequency.setValueAtTime(440,e.currentTime),o.frequency.setValueAtTime(440,e.currentTime),void 0!==t&&0!==t&&(n.detune.setValueAtTime(100*t,e.currentTime),i.detune.setValueAtTime(100*t,e.currentTime),o.detune.setValueAtTime(100*t,e.currentTime)),{square:n,sawtooth:i,sine:o}}function H(e,t){var n=new GainNode(e),i=new GainNode(e),o=new GainNode(e);return n.gain.setValueAtTime(1,e.currentTime),i.gain.setValueAtTime(1,e.currentTime),o.gain.setValueAtTime(1,e.currentTime),t.square.connect(n),t.sawtooth.connect(i),t.sine.connect(o),{square:n,sawtooth:i,sine:o}}function R(e,t){var n=new ChannelMergerNode(e,{numberOfInputs:3,channelCount:1});return t.square.connect(n),t.sawtooth.connect(n),t.sine.connect(n),n}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=z(e,t),i=H(e,n),o=R(e,i),r=new GainNode(e);return o.connect(r),{oscillators:n,oscillatorGains:i,output:r}}function W(e,t,n){if(null!==e&&t&&Array.isArray(t.real)&&Array.isArray(t.imag)){for(var i=new PeriodicWave(e,{real:t.real,imag:t.imag}),o=arguments.length,r=new Array(o>3?o-3:0),a=3;a<o;a++)r[a-3]=arguments[a];for(var s=0,u=r;s<u.length;s++){var c=u[s];if(null!==c)switch(n){case"square":c.oscillators.square.setPeriodicWave(i);break;case"sawtooth":c.oscillators.sawtooth.setPeriodicWave(i);break;case"sine":c.oscillators.sine.setPeriodicWave(i)}}}}function B(e,t,n){for(var i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];for(var a=0,s=o;a<s.length;a++){var u=s[a];null!==u&&(n&&(u.oscillators.square.detune.cancelScheduledValues(t),u.oscillators.sawtooth.detune.cancelScheduledValues(t),u.oscillators.sine.detune.cancelScheduledValues(t)),u.oscillators.square.detune.setValueAtTime(e,t),u.oscillators.sawtooth.detune.setValueAtTime(e,t),u.oscillators.sine.detune.setValueAtTime(e,t))}}function X(e,t,n,i){var o=.5*Math.PI;e.gain.setValueAtTime(n*o,i),t.gain.setValueAtTime((1-n)*o,i)}var Y=function(){function e(t,n,i){Object(q.a)(this,e),this.hue=t,this.saturation=n,this.lightness=i,this.structureInitialized=!1,this.audioContext=null,this.rootFrequencyChain=null,this.thirdFrequencyChain=null,this.fifthFrequencyChain=null,this.seventhFrequencyChain=null,this.startStopGainNode=null,this.lfoChain=null,this.reverbChain=null,this.lfoFrequency=15,this.lfoGain=.25,this.reverbGain=0,this.overallVolumeGainNode=null,this.overallVolumeGain=.1,this.isChordProgressionEnabled=!1,this.nextChordProgressionEndTime=0,this.chordDurationSeconds=2}return Object(T.a)(e,[{key:"initializeAudioStructure",value:function(){var e=this;if(!this.structureInitialized){null===this.audioContext&&(this.audioContext=new AudioContext),this.rootFrequencyChain=_(this.audioContext,k[0]),this.thirdFrequencyChain=_(this.audioContext,k[1]),this.fifthFrequencyChain=_(this.audioContext,k[2]),this.seventhFrequencyChain=_(this.audioContext,k[3]);var t=new ChannelMergerNode(this.audioContext,{numberOfInputs:3,channelCount:1});this.rootFrequencyChain.output.connect(t),this.thirdFrequencyChain.output.connect(t),this.fifthFrequencyChain.output.connect(t),this.seventhFrequencyChain.output.connect(t),this.startStopGainNode=new GainNode(this.audioContext),t.connect(this.startStopGainNode),this.lfoChain=function(e,t,n){var i=new OscillatorNode(e,{type:"sine"});i.frequency.setValueAtTime(t,e.currentTime);var o=new GainNode(e);i.connect(o);var r=new ConstantSourceNode(e),a=new GainNode(e);r.connect(a);var s=new ChannelMergerNode(e,{numberOfInputs:2,channelCount:1});o.connect(s),a.connect(s);var u=new GainNode(e);return s.connect(u.gain),X(o,a,n,e.currentTime),{oscillator:i,oscillatorGain:o,constantGain:a,lfoOutput:u}}(this.audioContext,this.lfoFrequency,this.lfoGain),this.startStopGainNode.connect(this.lfoChain.lfoOutput),this.reverbChain=function(e,t,n){var i=new ConvolverNode(e),o=new GainNode(e);i.connect(o);var r=new GainNode(e),a=new ChannelMergerNode(e,{numberOfInputs:2,channelCount:1});return o.connect(a),r.connect(a),n.connect(i),n.connect(r),X(o,r,t,e.currentTime),{reverbConvolver:i,wetGain:o,dryGain:r,reverbOutput:a}}(this.audioContext,this.reverbGain,this.lfoChain.lfoOutput),this.overallVolumeGainNode=new GainNode(this.audioContext),this.overallVolumeGainNode.gain.setValueAtTime(this.overallVolumeGain,this.audioContext.currentTime),this.reverbChain.reverbOutput.connect(this.overallVolumeGainNode),this.overallVolumeGainNode.connect(this.audioContext.destination),this.structureInitialized=!0,fetch("/hex-grid/assets/google/wavetable_08_Warm_Square").then((function(e){return e.json()})).then((function(t){W(e.audioContext,t,"square",e.rootFrequencyChain,e.thirdFrequencyChain,e.fifthFrequencyChain,e.seventhFrequencyChain)})).catch((function(e){console.error("error retrieving square wavetable",e)})),fetch("/hex-grid/assets/google/wavetable_06_Warm_Saw").then((function(e){return e.json()})).then((function(t){W(e.audioContext,t,"sawtooth",e.rootFrequencyChain,e.thirdFrequencyChain,e.fifthFrequencyChain,e.seventhFrequencyChain)})).catch((function(e){console.error("error retrieving saw wavetable",e)})),fetch("/hex-grid/assets/google/wavetable_Celeste").then((function(e){return e.json()})).then((function(t){W(e.audioContext,t,"sine",e.rootFrequencyChain,e.thirdFrequencyChain,e.fifthFrequencyChain,e.seventhFrequencyChain)})).catch((function(e){console.error("error retrieving sine wavetable",e)})),fetch("/hex-grid/assets/google/impulse-responses_matrix-reverb6.wav").then((function(e){return e.arrayBuffer()})).then((function(t){return e.audioContext.decodeAudioData(t)})).then((function(t){e.reverbChain&&(e.reverbChain.reverbConvolver.buffer=t)})).catch((function(e){console.error("error retrieving reverb data",e)}))}}},{key:"cascadeHueToAudioNodes",value:function(){if(null!==this.audioContext){var e=[0,1],t=[1,0],n=120,i=240,o=360,r=0,a=0,s=0;if(this.hue%120===0)switch(this.hue){case n:s=1;break;case i:a=1;break;case 0:case o:r=1}else if(this.hue%60===0)switch(this.hue){case 60:r=.5,s=.5;break;case 180:s=.5,a=.5;break;case 300:a=.5,r=.5}else this.hue<n?(r=y(this.hue,[0,n],t),s=y(this.hue,[0,n],e)):this.hue<i?(s=y(this.hue,[n,i],t),a=y(this.hue,[n,i],e)):this.hue<o&&(a=y(this.hue,[i,o],t),r=y(this.hue,[i,o],e));!function(e,t,n,i){for(var o=arguments.length,r=new Array(o>4?o-4:0),a=4;a<o;a++)r[a-4]=arguments[a];for(var s=0,u=r;s<u.length;s++){var c=u[s];null!==c&&(c.oscillatorGains.square.gain.setValueAtTime(e,i),c.oscillatorGains.sawtooth.gain.setValueAtTime(t,i),c.oscillatorGains.sine.gain.setValueAtTime(n,i))}}(r,s,a,this.audioContext.currentTime,this.rootFrequencyChain,this.thirdFrequencyChain,this.fifthFrequencyChain,this.seventhFrequencyChain)}}},{key:"cascadeSaturationToAudioNodes",value:function(){var e,t,n;if(null!==this.audioContext){var i=p(this.saturation,0,100)/100;null===(e=this.thirdFrequencyChain)||void 0===e||e.output.gain.setValueAtTime(i,this.audioContext.currentTime),null===(t=this.fifthFrequencyChain)||void 0===t||t.output.gain.setValueAtTime(i,this.audioContext.currentTime),null===(n=this.seventhFrequencyChain)||void 0===n||n.output.gain.setValueAtTime(i,this.audioContext.currentTime)}}},{key:"cascadeLightnessToAudioNodes",value:function(){if(null!==this.audioContext){var e=y(p(this.lightness,0,100),[0,100],[-25,25]);!function(e,t,n){for(var i=arguments.length,o=new Array(i>3?i-3:0),r=3;r<i;r++)o[r-3]=arguments[r];for(var a=0,s=o;a<s.length;a++){var u=s[a];null!==u&&(n&&(u.oscillators.square.frequency.cancelScheduledValues(t),u.oscillators.sawtooth.frequency.cancelScheduledValues(t),u.oscillators.sine.frequency.cancelScheduledValues(t)),u.oscillators.square.frequency.setValueAtTime(e,t),u.oscillators.sawtooth.frequency.setValueAtTime(e,t),u.oscillators.sine.frequency.setValueAtTime(e,t))}}(440*Math.pow(2,e/12),this.audioContext.currentTime,!1,this.rootFrequencyChain,this.thirdFrequencyChain,this.fifthFrequencyChain,this.seventhFrequencyChain)}}},{key:"queueChordProgression",value:function(){var e=this;if(null!==this.audioContext&&null!==this.startStopGainNode&&this.structureInitialized){if(!this.isChordProgressionEnabled)return this.startStopGainNode.gain.cancelScheduledValues(this.audioContext.currentTime),this.startStopGainNode.gain.setValueAtTime(1,this.audioContext.currentTime),B(100*k[0],this.audioContext.currentTime,!0,this.rootFrequencyChain),B(100*k[1],this.audioContext.currentTime,!0,this.thirdFrequencyChain),B(100*k[2],this.audioContext.currentTime,!0,this.fifthFrequencyChain),void B(100*k[3],this.audioContext.currentTime,!0,this.seventhFrequencyChain);var t=this.chordDurationSeconds/8;if(this.nextChordProgressionEndTime-.25>this.audioContext.currentTime)setTimeout((function(){e.queueChordProgression()}),250);else{var n=Math.floor(Math.random()*D.length),i=D[n],o=P[i];o.length<=3&&(o=o.concat(o));var r,a=Math.max(this.nextChordProgressionEndTime,this.audioContext.currentTime),s=Object(M.a)(o);try{for(s.s();!(r=s.n()).done;){var u=r.value;this.startStopGainNode.gain.linearRampToValueAtTime(1,a);var c=Object(x.a)(E[u],2),h=c[0],l=c[1];B(100*(h+l[0]),a,!1,this.rootFrequencyChain),B(100*(h+l[1]),a,!1,this.thirdFrequencyChain),B(100*(h+l[2]),a,!1,this.fifthFrequencyChain),B(100*(h+l[3]),a,!1,this.seventhFrequencyChain),a+=this.chordDurationSeconds,this.startStopGainNode.gain.setTargetAtTime(0,a,t),a+=t,a+=0}}catch(d){s.e(d)}finally{s.f()}a+=this.chordDurationSeconds/8,this.nextChordProgressionEndTime=a,setTimeout((function(){e.queueChordProgression()}),250)}}}},{key:"play",value:function(){null===this.audioContext&&(this.audioContext=new AudioContext,this.initializeAudioStructure(),this.cascadeHueToAudioNodes(),this.cascadeLightnessToAudioNodes(),this.cascadeSaturationToAudioNodes(),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,o=t;i<o.length;i++){var r=o[i];null!==r&&(r.oscillators.square.start(),r.oscillators.sawtooth.start(),r.oscillators.sine.start())}}(this.rootFrequencyChain,this.thirdFrequencyChain,this.fifthFrequencyChain,this.seventhFrequencyChain),null!==this.lfoChain&&this.lfoChain.oscillator.start()),this.audioContext.resume(),this.queueChordProgression()}},{key:"pause",value:function(){null!==this.audioContext&&this.audioContext.suspend()}},{key:"changeHue",value:function(e){this.hue=e%360,this.cascadeHueToAudioNodes()}},{key:"changeSaturation",value:function(e){this.saturation=e,this.cascadeSaturationToAudioNodes()}},{key:"changeLightness",value:function(e){this.lightness=e,this.cascadeLightnessToAudioNodes()}},{key:"changeVolume",value:function(e){this.overallVolumeGain=p(e,0,1),null!==this.audioContext&&null!==this.overallVolumeGainNode&&this.structureInitialized&&this.overallVolumeGainNode.gain.setValueAtTime(this.overallVolumeGain,this.audioContext.currentTime)}},{key:"changeReverbIntensity",value:function(e){this.reverbGain=p(e,0,1),null!==this.audioContext&&null!==this.reverbChain&&this.structureInitialized&&X(this.reverbChain.wetGain,this.reverbChain.dryGain,this.reverbGain,this.audioContext.currentTime)}},{key:"changeLfoIntensity",value:function(e){this.lfoGain=p(e,0,1),null!==this.audioContext&&null!==this.lfoChain&&this.structureInitialized&&X(this.lfoChain.oscillatorGain,this.lfoChain.constantGain,this.lfoGain,this.audioContext.currentTime)}},{key:"changeLfoFrequency",value:function(e){this.lfoFrequency=p(e,1,30),null!==this.audioContext&&null!==this.lfoChain&&this.structureInitialized&&this.lfoChain.oscillator.frequency.setValueAtTime(this.lfoFrequency,this.audioContext.currentTime)}},{key:"changeChordProgression",value:function(e){this.isChordProgressionEnabled!==e&&(this.isChordProgressionEnabled=e,this.queueChordProgression())}},{key:"changeChordDuration",value:function(e){this.chordDurationSeconds=p(e,.25,10)}}]),e}();var Z=function(){var e=I((function(e){return e.color.hue})),t=I((function(e){return e.color.saturation})),n=I((function(e){return e.color.lightness})),o=Object(i.useRef)(new Y(e,t,n)),r=Object(i.useState)(!1),a=Object(x.a)(r,2),s=a[0],u=a[1],c=Object(i.useState)(!1),h=Object(x.a)(c,2),l=h[0],d=h[1],f=Object(i.useState)(10),v=Object(x.a)(f,2),j=v[0],m=v[1],b=Object(i.useState)(0),g=Object(x.a)(b,2),y=g[0],p=g[1],C=Object(i.useState)(25),O=Object(x.a)(C,2),V=O[0],M=O[1],q=Object(i.useState)(15),T=Object(x.a)(q,2),S=T[0],A=T[1],L=Object(i.useState)(!1),G=Object(x.a)(L,2),N=G[0],F=G[1],k=Object(i.useState)(2),E=Object(x.a)(k,2),P=E[0],D=E[1];Object(i.useEffect)((function(){o.current.changeHue(e)}),[e]),Object(i.useEffect)((function(){o.current.changeSaturation(t)}),[t]),Object(i.useEffect)((function(){o.current.changeLightness(n)}),[n]);var z=function(e){e.stopPropagation()};return Object(w.jsxs)("div",{id:"audioPanel",onMouseDown:z,onTouchStart:z,children:[Object(w.jsxs)("div",{className:"settingBlock",children:[s&&Object(w.jsxs)("button",{type:"button",onClick:function(e){return l?o.current.pause():o.current.play(),d(!l),e.preventDefault(),e.stopPropagation(),!1},children:[Object(w.jsx)("svg",{className:"feather",children:Object(w.jsx)("use",{href:"/hex-grid/assets/feather/feather-sprite.svg#"+(l?"pause":"play")})}),l?"Pause":"Play"]}),Object(w.jsxs)("button",{type:"button",onClick:function(e){return u(!s),e.preventDefault(),e.stopPropagation(),!1},children:[Object(w.jsx)("svg",{className:"feather",children:Object(w.jsx)("use",{href:"/hex-grid/assets/feather/feather-sprite.svg#"+(s?"minimize-2":"maximize-2")})}),s?"Hide Audio":"Show Audio"]})]}),s&&Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:"settingBlock",children:[Object(w.jsx)("label",{htmlFor:"audioVolume",children:"Volume"}),Object(w.jsx)("input",{type:"range",id:"audioVolume",min:"0",max:"100",step:"1",value:j,onInput:function(e){var t=parseInt(e.target.value,10);m(t),o.current.changeVolume(t/100)}})]}),Object(w.jsxs)("div",{className:"settingBlock",children:[Object(w.jsx)("label",{htmlFor:"audioReverb",children:"Reverb"}),Object(w.jsx)("input",{type:"range",id:"audioReverb",min:"0",max:"100",step:"1",value:y,onInput:function(e){var t=parseInt(e.target.value,10);p(t),o.current.changeReverbIntensity(t/100)}})]}),Object(w.jsxs)("div",{className:"settingBlock",children:[Object(w.jsx)("label",{htmlFor:"audioLfoIntensity",children:"Wobble Intensity"}),Object(w.jsx)("input",{type:"range",id:"audioLfoIntensity",min:"0",max:"100",step:"1",value:V,onInput:function(e){var t=parseInt(e.target.value,10);M(t),o.current.changeLfoIntensity(t/100)}})]}),Object(w.jsxs)("div",{className:"settingBlock",children:[Object(w.jsx)("label",{htmlFor:"audioLfoFrequency",children:"Wobble Frequency"}),Object(w.jsx)("input",{type:"range",id:"audioLfoFrequency",min:"1",max:"30",step:"1",value:S,onInput:function(e){var t=parseInt(e.target.value,10);A(t),o.current.changeLfoFrequency(t)}})]}),Object(w.jsx)("div",{className:"settingBlock",children:Object(w.jsxs)("button",{type:"button",onClick:function(e){var t=!N;return F(t),o.current.changeChordProgression(t),e.preventDefault(),e.stopPropagation(),!1},children:[Object(w.jsx)("svg",{className:"feather",children:Object(w.jsx)("use",{href:"/hex-grid/assets/feather/feather-sprite.svg#"+(N?"activity":"music")})}),N?"Steady Tones":"Chords"]})}),Object(w.jsxs)("div",{className:"settingBlock",children:[Object(w.jsx)("label",{htmlFor:"audioChordDuration",children:"Chord Duration"}),Object(w.jsx)("input",{type:"range",id:"audioChordDuration",min:"0.25",max:"10",step:"0.25",value:P,onInput:function(e){var t=parseFloat(e.target.value);D(t),o.current.changeChordDuration(t)}})]})]})]})};n(38);var J=function(){var e=C(),t=Object(i.useState)(!1),n=Object(x.a)(t,2),o=n[0],r=n[1];Object(i.useEffect)((function(){if(o){var t=window.setInterval((function(){var t=Date.now()/3e4*2*Math.PI,n=Math.round(2*Math.cos(t));e({type:"color/adjustHue",payload:2}),e({type:"color/adjustSaturation",payload:n})}),200);return function(){window.clearInterval(t)}}}),[e,o]);var a=function(e){e.stopPropagation()};return Object(w.jsx)("div",{id:"cyclerPanel",onMouseDown:a,onTouchStart:a,children:Object(w.jsxs)("button",{type:"button",onClick:function(e){return r(!o),e.preventDefault(),e.stopPropagation(),!1},children:[Object(w.jsx)("svg",{className:"feather",children:Object(w.jsx)("use",{href:"/hex-grid/assets/feather/feather-sprite.svg#"+(o?"stop-circle":"play-circle")})}),o?"Stop Cycling":"Start Cycling"]})})};var U=function(){var e=I((function(e){return e.color.hue})),t=I((function(e){return e.color.saturation})),n=I((function(e){return e.color.lightness})),o=Object(i.useRef)(0),r=Object(i.useRef)(0),a=Object(i.useRef)(0);return Object(i.useEffect)((function(){var i,s="hsl(".concat(e,", ").concat(t,"%, ").concat(n,"%)");if(null===(i=document.querySelector('meta[name="theme-color"]'))||void 0===i||i.setAttribute("content",s),Math.abs(o.current-e)+Math.abs(r.current-t)+Math.abs(a.current-n)>20){var u=document.createElement("canvas");u.setAttribute("width","64px"),u.setAttribute("height","64px");var c=u.getContext("2d",{alpha:!0,desynchronized:!0});if(c){var h,l=new Path2D;l.moveTo(16,8),l.lineTo(48,8),l.lineTo(60,32),l.lineTo(48,56),l.lineTo(16,56),l.lineTo(4,32),l.closePath(),c.fillStyle=s,c.fill(l);var d=u.toDataURL("image/png");null===(h=document.querySelector('link[rel="icon"]'))||void 0===h||h.setAttribute("href",d)}u.remove(),o.current=e,r.current=t,a.current=n}}),[e,t,n]),null};var K=function(){var e=I((function(e){return e.color.hue})),t=I((function(e){return e.color.saturation})),n=I((function(e){return e.color.lightness})),i=I((function(e){return e.hexGrid.colorScaling.hue}));return Object(w.jsxs)("svg",{viewBox:"0 0 512 512",children:[Object(w.jsx)("path",{d:"M239.2,112L208,112L256,64L304,112L272.8,112L272.8,400L304,400L256,448L208,400L239.2,400L239.2,112Z",fill:"url(#_Saturation)",stroke:"black"}),Object(w.jsx)("path",{d:"M140.554,342.052L156.154,369.072L90.585,351.503L108.154,285.933L123.754,312.953L373.169,168.953L357.569,141.933L423.138,159.503L405.569,225.072L389.969,198.052L140.554,342.052Z",fill:"url(#_Lightness)",stroke:"black"}),Object(w.jsx)("path",{d:"M126.108,200.406L110.508,227.426L92.939,161.856L158.508,144.287L142.908,171.307L392.323,315.307L407.923,288.287L425.492,353.856L359.923,371.426L375.523,344.406L126.108,200.406Z",fill:"url(#_Hue)",stroke:"black"}),Object(w.jsxs)("defs",{children:[Object(w.jsxs)("linearGradient",{id:"_Lightness",x1:"0",y1:"0",x2:"1",y2:"0",gradientTransform:"rotate(-30 0.5 0.5)",children:[Object(w.jsx)("stop",{offset:"0",style:{stopColor:"hsl(".concat(e,",70%,0%)")}}),Object(w.jsx)("stop",{offset:"0.5",style:{stopColor:"hsl(".concat(e,",70%,").concat(n,"%)")}}),Object(w.jsx)("stop",{offset:"1",style:{stopColor:"hsl(".concat(e,",70%,100%)")}})]}),Object(w.jsxs)("linearGradient",{id:"_Hue",x1:"1",y1:"0",x2:"0",y2:"0",gradientTransform:"rotate(30 0.5 0.5)",children:[Object(w.jsx)("stop",{offset:"0",style:{stopColor:"hsl(".concat(e-15*i,",70%,50%)")}}),Object(w.jsx)("stop",{offset:"0.25",style:{stopColor:"hsl(".concat(e-8*i,",70%,50%)")}}),Object(w.jsx)("stop",{offset:"0.5",style:{stopColor:"hsl(".concat(e,",70%,50%)")}}),Object(w.jsx)("stop",{offset:"0.75",style:{stopColor:"hsl(".concat(e+8*i,",70%,50%)")}}),Object(w.jsx)("stop",{offset:"1",style:{stopColor:"hsl(".concat(e+15*i,",70%,50%)")}})]}),Object(w.jsxs)("linearGradient",{id:"_Saturation",x1:"0",y1:"0",x2:"1",y2:"0",gradientTransform:"rotate(-90 0.5 0.5)",children:[Object(w.jsx)("stop",{offset:"0",style:{stopColor:"hsl(".concat(e,",0%,").concat(n,"%)")}}),Object(w.jsx)("stop",{offset:"0.5",style:{stopColor:"hsl(".concat(e,",").concat(t,"%,").concat(n,"%)")}}),Object(w.jsx)("stop",{offset:"1",style:{stopColor:"hsl(".concat(e,",100%,").concat(n,"%)")}})]})]})]})};n(39);var Q=function(){var e=C(),t=I((function(e){return e.color.lightness})),n=I((function(e){return e.hexGrid.baseHexSize})),o=I((function(e){return e.hexGrid.colorScaling})),r=Object(i.useState)(!1),a=Object(x.a)(r,2),s=a[0],u=a[1],c=Object(i.useRef)(0),h=Object(i.useRef)(0);return Object(i.useEffect)((function(){var t=function(){u(!1),e({type:"hexGrid/resize"})};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[e]),Object(i.useEffect)((function(){var t=function(t){switch(t.code){case"Numpad8":case"ArrowUp":e({type:"color/adjustSaturation",payload:1});break;case"Numpad2":case"ArrowDown":e({type:"color/adjustSaturation",payload:-1});break;case"Numpad6":case"ArrowRight":e({type:"color/adjustHue",payload:1});break;case"Numpad4":case"ArrowLeft":e({type:"color/adjustHue",payload:-1});break;case"NumpadAdd":case"Equal":e({type:"color/adjustLightness",payload:1});break;case"NumpadSubtract":case"Minus":e({type:"color/adjustLightness",payload:-1})}};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[e]),Object(i.useEffect)((function(){var e=function(e){if(!s){var t,n;if("touchstart"===e.type){var i=e;if(1!==i.touches.length)return;t=i.touches[0].clientX,n=i.touches[0].clientY}else{if("mousedown"!==e.type)return;var o=e;t=o.clientX,n=o.clientY}u(!0),c.current=t,h.current=n}};return window.addEventListener("touchstart",e),window.addEventListener("mousedown",e),function(){window.removeEventListener("touchstart",e),window.removeEventListener("mousedown",e)}}),[e,s]),Object(i.useEffect)((function(){var t=function(t){if(s){var i,r,a;if("touchmove"===t.type){var u=t;if(1!==u.touches.length)return;a=!0,i=u.touches[0].clientX,r=u.touches[0].clientY}else{if("mousemove"!==t.type)return;var l=t;a=!1,i=l.clientX,r=l.clientY}var d=i-c.current,f=r-h.current,v=Math.sqrt(Math.pow(d,2)+Math.pow(f,2));if(v>=2*n){var j=180*Math.atan2(-f/v,d/v)/Math.PI;j<0&&(j+=360),e(j<=60?{type:"color/adjustLightness",payload:o.lightness}:j<=120?{type:"color/adjustSaturation",payload:o.saturation}:j<=180?{type:"color/adjustHue",payload:o.hue}:j<=240?{type:"color/adjustLightness",payload:-o.lightness}:j<=300?{type:"color/adjustSaturation",payload:-o.saturation}:{type:"color/adjustHue",payload:-o.hue}),c.current=i,h.current=r,a&&"vibrate"in navigator&&navigator.vibrate(40)}t.preventDefault(),t.stopPropagation()}};return window.addEventListener("touchmove",t),window.addEventListener("mousemove",t),function(){window.removeEventListener("touchmove",t),window.removeEventListener("mousemove",t)}}),[e,n,s,o]),Object(i.useEffect)((function(){var e=function(){u(!1)};return window.addEventListener("touchend",e),window.addEventListener("touchcancel",e),window.addEventListener("mouseup",e),function(){window.removeEventListener("touchend",e),window.removeEventListener("touchcancel",e),window.removeEventListener("mouseup",e)}}),[s]),Object(w.jsxs)("div",{style:{cursor:s?"grabbing":"grab"},className:t<=40?"dark-contrast":"light-contrast",children:[Object(w.jsx)("div",{className:"dragOverlay",children:s&&Object(w.jsx)(K,{})}),Object(w.jsx)(V,{}),Object(w.jsx)(Z,{}),Object(w.jsx)(J,{}),Object(w.jsx)(U,{}),!1]})};a.a.render(Object(w.jsx)(o.a.StrictMode,{children:Object(w.jsx)(s.a,{store:g,children:Object(w.jsx)(Q,{})})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.2f67f003.chunk.js.map